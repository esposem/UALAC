function highlightDays(e){for(var t=0;t<dates.length;t++)if(""+new Date(dates[t])==""+e)return[!0,"ui-date-highlight",""]
return[!0,""]}function getDateBox(e){e!=actdateref&&(actdateref=e,e=""+e,$(".homeEvents").html(""),$(".homeEvents").animate({height:300},400),$(".homeEvents").parent().css("overflow","hidden"),tDate=MaxDateLoaded.split("/"),MaxDateLoadedSet=new Date(tDate[2],tDate[0]-1,tDate[1]),tDate=MinDateLoaded.split("/"),MinDateLoadedSet=new Date(tDate[2],tDate[0]-1,tDate[1]),$(".datepicker").datepicker("option","maxDate",MaxDateLoadedSet),$(".datepicker").datepicker("option","minDate",MinDateLoadedSet),$.ajax({type:"GET",url:"/getEventsList.asp?getDate="+e+"&ssid="+Math.floor(9999*Math.random())}).done(function(e){$(".homeEvents").html("<div>"+e+"</div>"),$(".homeEvents div.container").fadeIn(300),getBuyButtons(),actMovedBox=0,setPlusBox(),$("div.arw").animate({top:$(".ui-datepicker-calendar").find(".ui-state-active").position().top+"px"},400)}))}function refreshCaptcha(){$(".gCaptcha").attr("src","/img_captcha.asp")}jQuery.easing.def="easeOutQuint"
var prevEmbed="",disabledBrowser=isiphone=isipad=ismobile=isandroid=ismsie=wphone=isphone=ischrome=isfirefox=!1,clientNavigator=navigator.userAgent.toLowerCase(),isdesktop=!0,MinDateLoaded=MaxDateLoaded=(new Date).getTime(),actBoxLoad="",ActMode="",modeprojects,modeinit,prevW=firstclick=0,loadBoxes,self=this
self.lastScroll=self.thisScroll=(new Date).getTime(),self.lastScroll=self.thisScroll,self.thisScroll=(new Date).getTime()
var gtImgsArray=[],totbgs,totimgs,actBgs="",actImgs="",actImgG=actSlide=intResized=prevVPwidth=prevVPheight=0,startCalDate=new Date(2015,8,12),hometimeslide=9e3,dates=[]
setskins=function(){wKins=$(window).width(),wKins>1920&&(wKins=1920),wKinsSet=parseInt((wKins-$("#pContainer").innerWidth())/2)-3,wKinsSet>321&&(wKinsSet=321),wKinsSet>150?(leftSkin=parseInt($("#pContainer").offset().left-wKinsSet)-7,rightSkin=parseInt(leftSkin+$("#pContainer").innerWidth()+wKinsSet)+14,$("div.skins, div.skinsr").width(wKinsSet),$("div.skins").css("left",leftSkin),$("div.skinsr").css("left",rightSkin),$("div.skins, div.skinsr").fadeIn(200)):$("div.skins, div.skinsr").css("display","none")}
var actdateref="",actMovedBox=0
setPlusBox=function(){actHh=$(".homeEvents").height(),actHt=$(".homeEvents div.container").position().top,actIn=$(".homeEvents div.container").innerHeight()+50,actInA=actIn+actHt,actIn>$(".homeEvents").height()&&(0==$("div.icoPlus").size()&&$('<div class="icoPlus"></div>').appendTo($(".homeEvents")),0==$("img.icoOp").size()&&$('<img src="/images/ico_down.png" alt="" class="icoOp"/>').prependTo($(".homeEvents div.icoPlus")),$(".homeEvents div.icoPlus img.icoOp").unbind("click"),$(".homeEvents div.icoPlus img.icoOp").click(function(){actMovedBox+=1,gtEq=$(".homeEvents div.container div.homeBox").eq(actMovedBox),newTop=-1*gtEq.position().top+50,checkH=actIn+newTop,newTop>=0||(checkH-20<actHh&&(newTop=newTop+(actHh-checkH)+20),$(".homeEvents div.container").animate({top:newTop+"px"},300,function(){checkH-20<actHh&&setUpArrow()}))}))},setUpArrow=function(){$(".homeEvents div.icoPlus img.icoOp").remove(),0==$(".homeEvents div.icoPlus img.icoCl").size()&&$('<img src="/images/ico_up.png" alt="" class="icoCl"/>').appendTo($(".homeEvents div.icoPlus")),$(".homeEvents div.icoPlus img.icoCl").unbind("click"),$(".homeEvents div.icoPlus img.icoCl").click(function(){newTop=50,actMovedBox=0,$(".homeEvents div.icoPlus img.icoCl").remove(),$(".homeEvents div.container").animate({top:newTop+"px"},600,function(){actHt=$(".homeEvents div.container").position().top,setPlusBox()})})},getSubcategory=function(e){evUrl="/getSubcategory.asp?maincat="+e,$.ajax({type:"GET",url:evUrl+"&ssid="+Math.floor(9999*Math.random())}).done(function(e){e='<option value="">'+$("select.subcat option").eq(0).html()+"</option>"+e,$("select.subcat").empty().append(e)})},viewInterview=function(e){$.ajax({type:"GET",url:"/getInterview.asp?load="+e+"&ssid="+Math.floor(9999*Math.random())}).done(function(e){$("#imgPager").css("display","none"),$("#imgPager").html(""),dImg=e.substring(0,e.indexOf("#")),dTxt=e.substring(e.indexOf("#")+1),dEmb="",-1!=dTxt.indexOf("#embd#")&&(dTxt=dTxt.substring(0,dTxt.indexOf("#embd#")),dEmb=e.substring(e.indexOf("#embd#")+6)),$("div.interviewContent").html(dTxt),dEmb.length>0?(imgnews='<div class="embdVideo" style="margin-top:-18px">'+dEmb+"</div>",$("#imgPager").html(imgnews),$("#imgPager").css("display","inline"),$("div.embdVideo").fadeIn(500)):dImg.length>0&&(imgnews='<img class="imgPage" id="imgG0" src="/images/vuoto.gif" style="display:inline; background-image: url(\'/images/1680/'+dImg+'\')" alt=""/>',$("#imgPager").html(imgnews),$("#imgPager").css("display","inline"))})},getBuyButtons=function(){$("img.bClick").click(function(e){e.stopPropagation(),gtTlink=$(this).attr("data-href"),dest=$(this).parent().parent().attr("data-title"),$(this).hasClass("pTicket")&&(dest=$(this).attr("data-title")),makeDest=dest+"?ticketlink="+gtTlink,document.location=makeDest}),$("img.pClick").click(function(e){e.stopPropagation(),dest=$(this).attr("data-href"),makeDest=dest+"?mode=booking",document.location=makeDest}),$("div.homeEvents .homeBox").click(function(e){event.stopPropagation(),document.location="/"+$(this).attr("data-title")}),$("div.homeEvents .homeBox span").click(function(e){event.stopPropagation()}),$("div.homeBox > infoSet span").click(function(e){event.stopPropagation()})},getEmbed=function(e){$("textarea.embedContent").size()>0&&0==$("div.embdVideo").html().length&&($("div.embdVideo").html($("textarea.embedContent").val()),$("div.imgDesc").remove()),1==e&&$("body").removeClass("imgPageSmall"),$("#imgPager .imgPage").css("display","none"),$("img.ico_play").css("display","none"),$("img.ico_gallery").css("display","inline"),$("div.embdVideo").fadeIn(500),$("div.img_gallery").removeClass("active"),$("img.arrow").css("display","none")}
var loadedImg=0
gtGImg=function(mode){actInd=$("div.rightControls div.active").index()-1,newInd=eval(actInd+mode),newInd<0&&(newInd=$("div.img_gallery").size()-1),newInd>=$("div.img_gallery").size()&&(newInd=0),loadedImg!=newInd&&$("div.img_gallery").eq(newInd).trigger("click")},imgPageCheck=function(e){wHeight=$(window).height(),wWidth=$(window).width(),(prevVPheight!=wHeight||prevVPwidth!=wWidth)&&(doH=0,prevVPheight!=wHeight&&(doH=1,prevVPheight=wHeight),prevVPwidth!=wWidth&&(prevVPwidth=wWidth),1==doH&&($("body").removeClass("imgPageSmall"),wHeight<900&&$("body").addClass("imgPageSmall")),$("#imgG0").size()>0&&(pimg=$("#imgG0"),checkImg196(pimg)))},checkImg196=function(e){gtR=e.width()/e.height(),gtimgb=e.css("background-image").replace("url(",""),gtimgb=gtimgb.replace(")",""),gtimgb=gtimgb.replace(/"/g,""),$("<img/>").load(function(){gtR1=this.width/this.height,gtR>gtR1?e.addClass("imgPage169"):e.removeClass("imgPage169")}).attr("src",gtimgb)},makePlusInfo=function(){$("div.textLeft").addClass("lnn"),$('<div class="plusDiv"><img src="/images/ico_plus.png" alt="" class="icoPlus"/></div>').appendTo($("div.textLeft")),$("div.textLeft img.icoPlus").click(function(){$(this).parent().parent().animate({maxHeight:stHeight-10},500,function(){$("div.mobileEvent").is(":visible")&&$("div.mobileEvent").trigger("click"),$("div.textLeft img.icoPlus").addClass("icoPlusClose"),$("div.textLeft img.icoPlus").unbind("click"),$("div.textLeft img.icoPlus").bind("click",function(){$(this).parent().parent().animate({maxHeight:336},300,function(){$("div.mobileEvent").is(":visible")&&$("div.mobileEvent").trigger("click")}),setTimeout(function(){$("div.textLeft img.icoPlus").remove(),makePlusInfo()},300)})})})},iniSite=function(e,t){if($("#coverLoad").remove(),$("div.homeBoxes div.mmain").size()>0&&$("div.homeBoxes div.mmain").each(function(){objsd=$(this).find("div.homeBox"),objsd.removeClass("firstbox"),objsd.shuffle()}),setBodySize.length>0&&setTextSize(setBodySize),modeprojects=e,modeinit=t,checkNavigator(),disabledBrowser||$.getScript("/js/"+langHype+".js",function(){setHype()}),disabledBrowser&&($("div.homeBox div.dtHome").remove(),$("div.homeBox div").removeClass("dhdate")),$("li.adPmenu").click(function(){stMh=$("div.leftText ul").innerHeight()+60,$("div.leftText").animate({height:stMh+"px"},500)}),desktopSite(),$("input.sTring").bind("click",function(){$(this).selectRange(0,0),$(this).addClass("sTring1"),inputRewrite()}),$("img.mmob").click(function(e){0==$(".MenuMobile").size()&&(adMenu=$("#mainmenu_set ul.mainMenu").html(),$('<div class="MenuMobile divTogl1"><div class="centered"><ul>'+adMenu+"</ul></div></div>").prependTo($("#mainFixed div.centered"))),$(".MenuMobile").width($("#header").width()),$(".MenuMobile").css("left",$("#header").position().left),$("div.divTogl1").not($(".MenuMobile")).slideUp(100),$(".MenuMobile").stop().slideToggle(400)}),disabledBrowser&&($("div.mmain").eq(2).width("32%"),$("div.mmain").eq(2).css("margin-right","0px"),$("div.homeBox").each(function(){$(this).attr("data-href",$(this).attr("data-href").replace("/800/","/400/"))}),$("div.img_gallery").each(function(){$(this).attr("data-href",$(this).attr("data-href").replace("/1680/","/840/"))}),$("div.evList div.li > img").each(function(){$(this).attr("style",$(this).attr("style").replace("/400/","/200/"))}),$("div.newsbox > div").css("background","transparent !important"),$("div.pText span.sTel").css("background-image","url(/images/ico_tel_sm.png)"),$("div.pText span.sWatch").css("background-image","url(/images/ico_clock_sm.png)"),$("div.datepicker div.icoCal").css("background","transparent !important"),$("div.datepicker div.icoCal").css("background-image","url(/images/ico_cal_sm.png) !important"),$("#mainLogo img").css("display","none"),$('<img src="/images/lac_logo_16.png" style="width:200px;height:113px; display:inline !important"/>').appendTo($("#mainLogo")),$("#imgG0").size()>0&&$("#imgG0").attr("style",$("#imgG0").attr("style").replace("/1680/","/840/"))),$("body").hasClass("homepage")){for(setskins(),tHbox=$("div.mmain").size()-1,loadBoxesImages(),x=0;x<=tHbox;x++)$('<div class="mobDot"></div>').appendTo($("div.homeBoxesContainer"))
for($("div.mobDot").eq(0).addClass("active"),$("div.mobDot").click(function(e){stX=$(this).index("div.mobDot"),$("div.mobDot").removeClass("active"),gtLeft=-1*$("div.mmain").eq(stX).position().left,$("div.homeBoxes").animate({marginLeft:gtLeft+"px"},500),$(this).addClass("active")}),$("div.mobDot").eq(0).css("margin-left","45%"),$("div.mmain div.homeBox").swipe({tap:function(e,t){document.location="/"+$(this).attr("data-title")},swipeLeft:function(e,t,i,a,o){gtX=$(this).parent().index(".mmain"),gtX!=tHbox&&($("div.mobDot").removeClass("active"),gtLeft=-1*$("div.mmain").eq(gtX+1).position().left,$("div.homeBoxes").animate({marginLeft:gtLeft+"px"},500),$("div.mobDot").eq(gtX+1).addClass("active"))},swipeRight:function(e,t,i,a,o){gtX=$(this).parent().index(".mmain"),0!=gtX&&($("div.mobDot").removeClass("active"),gtLeft=-1*$("div.mmain").eq(gtX-1).position().left,$("div.homeBoxes").animate({marginLeft:gtLeft+"px"},500),$("div.mobDot").eq(gtX-1).addClass("active"))},threshold:30}),$(".homeBoxes_double, .homeBoxes_single").each(function(){gtLeft=$(this).position().left,gtTop=$(this).position().top,gtWidth=$(this).width(),ptWidth=$(this).parent().width(),gtLeft>0&&($(this).hasClass("grayBoxSingle")||$(this).css("margin-left","2%"),gtPrev=$(this).prev(".bxH").position().top,gtPrev<gtTop?$(this).css("clear","left"):$(this).css("margin-left","2%"))}),ttimer=3e3,x=0;x<$("div.homeBoxes > div.mmain").size();x++)gtj=$("div.homeBoxes > div.mmain").eq(x).find("div.homeBox").eq(actSlide),gtj.size()>0&&loadHomeBgBox(gtj),gtj.addClass("showing"),gtj.css("top","36px"),changeBoxSlide($("div.homeBoxes > div.mmain").eq(x),hometimeslide+(ttimer+ttimer*(x/2)))
ismobile||$("div.homeBoxes > div").not(".mobDot").hover(function(){$(this).find("div.bgSetO").fadeIn()},function(){$(this).find("div.bgSetO").fadeOut()}),$("div.mmain > ul  li").click(function(e){ismobile&&event.stopPropagation(),toDest=$(this).find("a").attr("data-href"),document.location=toDest}),$("div.mmain > ul  li  a").click(function(e){event.stopPropagation(),toDest=$(this).attr("data-href"),document.location=toDest}),$("div.mmain > ul").hover(function(){},function(){$(this).slideUp(300)}),$("div.mmain > p").click(function(){ulobj=$(this).parent().find("ul"),$("div.mmain > ul").not(ulobj).slideUp(200),ulobj.size()>0?ulobj.slideToggle(400,function(){ismobile&&$(this).parent().find("div.bgSetO").stop().fadeToggle()}):(toDest=$(this).parent().attr("data-href"),document.location=toDest)})}$("div.textLeft").size()>0?(iniL1h=$("div.textLeft0").height(),iniL0h=$("div.textLeft").height(),toHT=Math.max(iniL0h,iniL1h),$("div.textLeft").height(toHT),$("div.textLeft0").height(toHT),stHeight=$("div.textLeft").innerHeight(),iniL1h<toHT&&$("div.textLeft0").height(iniL1h),stHeight>340&&iniL0h>iniL1h&&makePlusInfo()):(tW=$("div.textLeft0").width(),$("div.textLeft0").width("100%"),$("div.textLeft0").size()>0&&(wtxt=$("div.textLeft0").html(),-1!=wtxt.indexOf("mediazione culturale del Museo")&&($("div.textLeft0").appendTo("div.bLeft"),$("div.textLeft0").css("border-top","solid 1px #ccc"),$("div.textLeft0").css("padding-top","4px")))),$("div.img_gallery").size()>0&&($("img.imgPage").swipe({swipeLeft:function(e,t,i,a,o){gtGImg(1)},swipeRight:function(e,t,i,a,o){gtGImg(-1)},threshold:30}),$("div.img_gallery").eq(0).addClass("active"),$("div.img_gallery").size()>1&&($('<img class="arrow" src="/images/ar_gl_next.png" onclick="gtGImg(1)"/>').appendTo($("#imgPager")),$('<img class="arrow arrowback" src="/images/ar_gl_back.png" onclick="gtGImg(-1)"/>').appendTo($("#imgPager")),$("img.arrow").not(".arrowback").hover(function(){$(this).stop().animate({right:"0.3%"},200)},function(){$(this).stop().animate({right:"1.5%"},200)}),$("img.arrowback").hover(function(){$(this).stop().animate({left:"0.3%"},200)},function(){$(this).stop().animate({left:"1.5%"},200)})),$("div.img_gallery").size()>1&&($("img.ico_gallery").css("display","inline"),$("div.img_gallery").css("display","inline")),$("div.img_gallery").click(function(){$("div.img_gallery").size()<2&&$("img.ico_gallery").css("display","none"),$("img.ico_play").css("display","inline"),$("div.embdVideo").html(""),gtIndImg=$(this).index()-1,$("img.arrow").css("display","inline"),$("div.img_gallery").removeClass("active"),$("div.img_gallery").eq(gtIndImg).addClass("active"),loadedImg=gtIndImg,gtHref=$("div.img_gallery").eq(gtIndImg).attr("data-href"),gtDesc=$("div.img_gallery").eq(gtIndImg).attr("title"),$("div.embdVideo").stop().fadeOut(400),$("div.imgDesc").remove(),$("img.imgPage").fadeOut(400,function(){$("img.imgPage").css("background-image","url("+gtHref+")"),gtDesc.length>0&&$('<div class="imgDesc"><p>'+gtDesc+"</p></div>").appendTo($("img.imgPage").parent()),imgPageCheck(0),checkImg196($("img.imgPage")),$("img.imgPage").fadeIn(400)})}),$("img.imgPage").css("display","none"),$("div.img_gallery").eq(0).trigger("click")),$("ul.subli li a").click(function(e){e.stopPropagation()}),$("ul.subli li").click(function(e){e.stopPropagation(),document.location=$(this).find("a").attr("href")}),$("ul li.mli").click(function(e){e.stopPropagation(),document.location=$(this).find("a").attr("href")}),$("div.textLeft").size()>0&&($("div.textLeft").html().length<5?$("div.textLeft").remove():$("div.textLeft0").size()>0&&$("div.textLeft0").html().length<7&&($("div.textLeft0").remove(),$("div.textLeft").addClass("textLeftDouble"))),$("div.textLeft0").size()>0?$("div.textLeft0").html().length<7&&$("div.textLeft0").remove():$("div.textLeft").addClass("textLeftDouble"),$("div.bLeft").size()>0&&$("div.bLeft").html().length<7&&$("div.bLeft").remove(),$("div.evList > div").click(function(e){e.stopPropagation(),document.location=$(this).attr("data-title")}),$("div.evList span").click(function(e){e.stopPropagation()}),imgPageCheck(1),$("form.newsletter").submit(function(e){e.preventDefault(),addemail=$("form.newsletter input.email").val(),addCheck="",$("form.newsletter input.LO_teatro").is(":checked")&&(addCheck+='<input type="checkbox" id="subscribe_PGQ62VUK9Q7WOA5LXEUQ_0" name="subscribe_PGQ62VUK9Q7WOA5LXEUQ" value="0" id="subscribe_PGQ62VUK9Q7WOA5LXEUQ"  checked="checked"/>'),$("form.newsletter input.LO_danza").is(":checked")&&(addCheck+='<input type="checkbox" id="subscribe_PGQ62VUK9Q7WOA5LXEUQ_1" name="subscribe_PGQ62VUK9Q7WOA5LXEUQ" value="1" id="subscribe_PGQ62VUK9Q7WOA5LXEUQ"  checked="checked"/>'),$("form.newsletter input.LO_classica").is(":checked")&&(addCheck+='<input type="checkbox" id="subscribe_PGQ62VUK9Q7WOA5LXEUQ_2" name="subscribe_PGQ62VUK9Q7WOA5LXEUQ" value="2" id="subscribe_PGQ62VUK9Q7WOA5LXEUQ"  checked="checked"/>'),$("form.newsletter input.LO_musica").is(":checked")&&(addCheck+='<input type="checkbox" id="subscribe_PGQ62VUK9Q7WOA5LXEUQ_3" name="subscribe_PGQ62VUK9Q7WOA5LXEUQ" value="3" id="subscribe_PGQ62VUK9Q7WOA5LXEUQ"  checked="checked"/>'),$("form.newsletter input.LO_museo").is(":checked")&&(addCheck+='<input type="checkbox" id="subscribe_PGQ62VUK9Q7WOA5LXEUQ_4" name="subscribe_PGQ62VUK9Q7WOA5LXEUQ" value="4" id="subscribe_PGQ62VUK9Q7WOA5LXEUQ"  checked="checked"/>'),$("form.newsletter input.LO_lacedu").is(":checked")&&(addCheck+='<input type="checkbox" id="subscribe_PGQ62VUK9Q7WOA5LXEUQ_5" name="subscribe_PGQ62VUK9Q7WOA5LXEUQ" value="5" id="subscribe_PGQ62VUK9Q7WOA5LXEUQ"  checked="checked"/>'),data1=$("form.newsletter").serialize()
var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
return checkmail=t.test(addemail),checkmail&&($("p.nmsg").remove(),$.ajax({type:"POST",dataType:"html",data:data1,url:"/newsletter_add.asp",success:function(e){-1!=e.indexOf("<span>")?($("form.newsletter input.email").remove(),$("form.newsletter").html("<p>"+e+"</p>"),$('<div class="frmAdd" style="width:1px; height:1px; overflow:hidden"><form name="subscribe" method="post" id="subscribeDo" target="tinextDo" action="http://newsletter.tinext.com/bump/subscribe?action=subscribe"><!--input type="hidden" name="action" value="subscribe"/-->'+addCheck+'<input type="hidden" name="uid" value="KNNRQ5H8WOLOPT6S6RNC"/><input type="hidden" name="sid" value="1277143291"/><input type="hidden" name="email" value="'+addemail+'"/><input type="hidden" name="multipart" value="M"/></form></div><iframe name="tinextDo" src="/admin/blank.asp" style="width:1px; opacity:0; height:1px; overflow:hidden;" scrolling="no"></iframe>').appendTo($("body")),$("#subscribeDo").submit()):$('<p class="nmsg" style="color:#ff0000; margin:10px 0px"><br/>'+e+"</p>").appendTo($("div.normalPage"))}})),!1}),$(".datepicker").size()>0&&setTimeout(function(){loadCalPage(),setTimeout(function(){$(".ui-state-active").trigger("click")},1200)},300),getBuyButtons(),$(window).resize(function(){imgPageCheck(1),$(".MenuMobile").css("display","none"),$("body").hasClass("homepage")&&setskins()}),$(window).scroll(function(){actScroll=$(window).scrollTop(),loadBoxesImages(),ismobile?$(".MenuMobile").stop().slideUp():($("div.divTogl").stop().animate({height:"0px"},100),$("div.divTogl1").stop().slideUp()),$("body").hasClass("homepage")&&(actScroll>90?(ismobile||$("#mainLogo").fadeOut(200),ismobile&&$("#mainLogo").css("display","none"),$("#whiteLogo img").fadeIn(200,function(){intResized=1})):(ismobile||$("#mainLogo").fadeIn(200),ismobile&&$("#mainLogo").css("display","inline"),$("#whiteLogo img").fadeOut(200,function(){intResized=0})))})
var i=""+document.location.href
if(-1!=i.indexOf("?mode=booking")&&$("img.bkn").trigger("click"),-1!=i.indexOf("ticketlink=")){i=i.substring(i.indexOf("ticketlink="))
var a=i.split("=")
if(isphone){var o=decodeURIComponent(a[1])
return o=o.replace("%27",""),o=o.replace("affiliate=LAA&",""),o=o.replace("affiliate=laa&",""),o=o.replace("tickets.html",''),void(document.location="http://www.ticketcorner.ch/tickets.html"+o)}$('<div id="TicketcornerShopContainer"></div>').appendTo($("div.pText")),$("div.pageContent").css("display","none"),$("img.pTicket").css("display","none"),$('<img class="pTicket rtxt" src="/images/ico_text_.png" alt="Text" title="Text" onclick="restoreText()"/>').appendTo($("div.pText header")),parentUrl=document.URL
var o=decodeURIComponent(a[1])
o=o.replace("%27",""),appendDynamicHeightIFrame("#TicketcornerShopContainer","https://secure.ticketcorner.ch/",o+"&parentUrl="+parentUrl,600,$("div.pText").width())}makeCForm(),$("#cpcode, #emcode").blur(function(){0==$(this).val().length&&$(this).val($(this).attr("title"))}),$(".vidCont").size()>0&&$("#imgPager").css("max-height","472px"),$.getScript("//use.typekit.net/goj3fct.js",function(e,t,i){try{Typekit.load()}catch(a){}})},checkBook=function(e){cpcode=$("#cpcode").val(),emcode=$("#emcode").val(),$("p.erp").remove(),$("#chkbk p").not("#chkbk p.fp").remove()
var t=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/
return t.test(emcode)?$.isNumeric(cpcode)?void $.ajax({url:"/bookCheck.asp?load="+e+"&cpcode="+cpcode+"&emcode="+emcode+"&ssid="+Math.floor(99999*Math.random()),success:function(e){"ERROR"==e?$('<p style="color:#ec2027" class="erp">Nessuna prenotazione trovata, verificare i dati inseriti.</p>').appendTo($("#chkbk")):$(""+e).appendTo($("#chkbk"))},error:function(e){$('<p style="color:#ec2027" class="erp">Spiacenti, si è verificato un errore, non siamo in grado di verificare la sua richiesta.</p>').appendTo($("#chkbk"))}}):void $('<p style="color:#ec2027" class="erp">Verifica codice CAP</p>').appendTo($("#chkbk")):void $('<p style="color:#ec2027" class="erp">Verifica indirizzo email</p>').appendTo($("#chkbk"))}
var loadCalPage=function(){evUrl="/getEvents.asp?mode=home",$("body").hasClass("event")&&(evUrl="/getEvents.asp?mode=page"),$.ajax({type:"GET",url:evUrl+"&ssid="+Math.floor(9999*Math.random())}).done(function(e){if(e.length>0)for(e=e.split("#"),MinDateLoaded=e[0],MaxDateLoaded=e[e.length-1],y=0;y<e.length;y++)dates.push(e[y])}),fromDate=startCalDate,$("input.fDate").size()>0&&($("input.fDate").val().length>0&&(tDate=$("input.fDate").val().split("/"),fromDate=new Date(tDate[2],tDate[0]-1,tDate[1])),$("input.fDatea").val().length>0?(tDate1=$("input.fDatea").val().split("/"),toDate=new Date(tDate1[2],tDate1[0]-1,tDate1[1])):toDate=fromDate),$("div.icoCal").click(function(){dateText=$(".datepicker").datepicker("getDate"),dateText=dateText.getMonth()+1+"/"+dateText.getDate()+"/"+dateText.getFullYear(),document.location="/searchevents/?dateFrom="+dateText}),$("#datepick").datepicker({dateFormat:"mm/dd/yy",beforeShow:function(e,t){t.dpDiv.addClass("searchPicker")},onSelect:function(e,t){$("#datepick1").datepicker("option","minDate",e),e=e.split("/"),$("span.dd").html(e[1]+"."+e[0]+"."+e[2]),$("input.dateFrom").val("")}}),$("#datepick1").datepicker({dateFormat:"mm/dd/yy",beforeShow:function(e,t){t.dpDiv.addClass("searchPicker")},onSelect:function(e,t){$("#datepick").datepicker("option","maxDate",e),e=e.split("/"),$("span.da").html(e[1]+"."+e[0]+"."+e[2]),$("input.dateFrom").val("")}}),$("div.mobileEventClose").click(function(){$("div.leftText").animate({height:"48px"},300),$(this).css("display","none")}),$("div.mobileEvent").is(":visible")&&$("p.addsponsors").appendTo("div.pageContent"),$("div.mobileEvent").click(function(){0==$("div.tLeft div.wDates").size()&&($("p.mainLeft").prependTo($("div.textLeft0")),$("div.textLeft0").appendTo($("div.tLeft")),$("div.bLeft div.wDates").prependTo($("div.tLeft"))),$("div.mobileEventClose").css("display","inline"),gH=$("div.tLeft").innerHeight(),gH1=$("div.bLeft").innerHeight(),sH=Math.max(gH,gH1)+60,sH=gH+gH1+60,$("div.leftText").animate({height:sH+"px"},900)}),$("body").hasClass("event")?$(".datepicker").datepicker({inline:!0,showOtherMonths:!1,beforeShowDay:highlightDays,defaultDate:fromDate,minDate:fromDate,maxDate:toDate,onSelect:function(e,t){e=e.split("/")
var i=e[1]+"/"+e[0]+"/"+e[2]
firstclick>0&&$.ajax({type:"GET",url:"/getEventDetail.asp?checkdate="+i+"&ssid="+Math.floor(9999*Math.random())}).done(function(e){e.length>0&&$("p.dateEvent").eq(0).html(e)}),$(this).addClass("ui-state-active"),firstclick++}}):$(".datepicker").datepicker({inline:!0,showOtherMonths:!1,beforeShowDay:highlightDays,defaultDate:fromDate,onSelect:function(e,t){e=e.split("/"),$(this).addClass("ui-state-active")
var i=e[1]+"/"+e[0]+"/"+e[2]
$("body").hasClass("homepage")&&getDateBox(i),!$("body").hasClass("homepage")&&firstclick>0&&($("input.dateFrom").val(i),$("#datepick1").val(i),$("#datepick").val(i),$("input.modeSearch").val("exactdet"),$('input[name="searchString"]').val(""),$("form.evSearch").submit()),firstclick++}})},printVoucher=function(e,t){$("#doPdf").remove(),$.ajax({url:"/voucherPrint.asp?reford="+t+"&user="+e+"&ssid="+Math.floor(99999*Math.random()),success:function(e){"ERROR"!=e&&(codesGet=e.substring(3,e.indexOf("$$")),codes=codesGet.split("_"),htmlTxt=encodeURI(e.substring(e.indexOf("$$")+2)),$('<form id="doPdf" action="/convertHtmlPdf.aspx" method="post" target="_self"><input type="hidden" name="fname" value="LAC_Voucher_prenotazione_'+codesGet+'"/><textarea name="HtmlCode" style="opacity:0.0; width:1px; height:1px; overflow:hidden">'+htmlTxt+"</textarea></form>").appendTo($("#chkbk")),$("#doPdf").submit())}})},loadTicketing=function(e){$('<div id="TicketcornerShopContainer"></div>').appendTo($("div.pText")),parentUrl=document.URL
var t=decodeURIComponent(e)
t=t.replace("%27",""),appendDynamicHeightIFrame("#TicketcornerShopContainer","https://secure.ticketcorner.ch/",t+"&parentUrl="+parentUrl,600,$("div.pText").width())},getBooking=function(e,t,i,a){$('<div id="bookingContainer"></div>').appendTo($("div.pText")),$("img.pTicket").css("display","none"),$("div.pageContent").css("display","none"),$('<img class="pTicket rtxt" src="/images/ico_text_.png" alt="Text" title="Text" onclick="restoreText()"/>').appendTo($("div.pText header")),$("html,body").animate({scrollTop:$("#bookingContainer").offset().top},400),$.ajax({type:"GET",url:"/getBooking.asp?mode="+a+"&load="+e+"&refid="+t+"&bookref="+i+"&ssid="+Math.floor(9999*Math.random())}).done(function(e){$("#bookingContainer").html(e),$("#getBook").submit(function(e){return e.preventDefault,inpts=$("div.pText #bookingContainer p input").not(".bt").not(".posti"),inpts.removeClass("err"),gtval1=$(".cptch").val(),$.ajax({url:"/capthca_check.asp?val="+gtval1+"&ssid="+Math.floor(99999*Math.random()),success:function(e){if("NOOK"==e)$(".cptch").addClass("err")
else{complete=1,gtMail=$("#getBook input[name=email]").val()
var t=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/
for(t.test(gtMail)||($("#getBook input[name=email]").addClass("err"),complete=0),x=0;x<inpts.size();x++)inpts.eq(x).val().length<2&&(inpts.eq(x).addClass("err"),complete=0)
1==complete&&(data1=$("#getBook").serialize(),$("#getBook").css("opacity","0.0"),$('<p class="sending" style="color:#ff0000">Inviando prenotazione</p>').appendTo($("#bookingContainer")),$.ajax({type:"POST",url:"/addBook.asp",dataType:"html",data:data1,success:function(e){$("p.sending").remove(),-1!=e.indexOf("OK")&&($("#getBook").remove(),$("#bookingContainer").remove(),codesGet=e.substring(3,e.indexOf("$$")),codes=codesGet.split("_"),$('<p><strong><br/><br/>Grazie per la sua prenotazione</strong><br/><br/>La preghiamo di stampare il voucher di conferma della vostra prenotazione.<br/><br/>Se l\'allegato non si scarica automaticamente premere il tasto Download Conferma.<br/><br/><input type="button" onclick="javascript:$(\'#doPdf\').submit()" value="DOWNLOAD CONFERMA PRENOTAZIONE"/> <input class="resend" type="button" onclick="javascript:voucherSend('+codes[0]+","+codes[1]+')" value="Invia per E-Mail"/></p>').appendTo("div.normalPage"),$("html,body").scrollTop(0),htmlTxt=encodeURI(e.substring(e.indexOf("$$")+2)),$('<form id="doPdf" action="/convertHtmlPdf.aspx" method="post" target="_self"><input type="hidden" name="fname" value="LAC_Voucher_prenotazione_'+codesGet+'"/><textarea name="HtmlCode" style="opacity:0.0; width:1px; height:1px; overflow:hidden">'+htmlTxt+"</textarea></form>").appendTo("body"),$("#doPdf").submit()),"ERR1"==e&&($("#getBook").remove(),$("#bookingContainer").html("<p>Prenotazione evento non più disponibile.</p>")),"ERR2"==e&&($("#getBook").remove(),$("#bookingContainer").html("<p>La sua richiesta si è probabilmente incrociata con quella di un altro utente.<br/>Purtroppo non risultano più posti disponibili per l'evento.</p>")),"ERR3"==e&&($("#getBook").remove(),$("#bookingContainer").html("<p>Prenotazione già effettuata per questo evento.</p>"))},error:function(e){$("#getBook input[type=submit]").css("opacity","1.0"),$('<p style="color:#ff0000">Si è verificato un errore, si prega di riprovare</p>').appendTo($("#bookingContainer"))}}))}}}),!1})})}
voucherSend=function(e,t){$("input.resend").css("display","none"),$.ajax({type:"GET",url:"/admin/resendIscr.asp?user="+e+"&reford="+t+"&ssid="+Math.floor(9999*Math.random()),success:function(e){$('<p class="erp"><strong>Voucher inviato all\'indirizzo</strong> '+e+"</p>").appendTo("div.normalPage"),$("input.resend").remove()},error:function(e){$("<p>Non è stato possibile inviare il voucher</p>").appendTo("div.normalPage"),$("input.resend").css("display","inline")}})},updPlaces=function(e){nVal=parseInt($("input.posti").val()),nVal+=e,dMax=parseInt($("input.posti").attr("max")),nVal>dMax&&(nVal=dMax),nVal<1&&(nVal=1),$("input.posti").val(nVal)}
var countAdapt=prevIfrH=if_height=0
scrollToTcFrame=function(){$("html,body").delay(300).animate({scrollTop:$("#TicketcornerShopContainer").offset().top-160},400),countAdapt=0}
var appendDynamicHeightIFrame=function(e,t,i,a,o){src=t+i+"#"+encodeURIComponent(document.location.href),0==$("#TcFrame").size()&&(iframe=$('<iframe id="TcFrame" src="'+src+'" frameborder="0" scrolling="auto" onload="scrollToTcFrame()" width="'+o+'" height="'+a+'"></iframe>').appendTo(e),$.receiveMessage(function(e){countAdapt++
var t=+e.data.replace(/.*if_height=(\d+)(?:&|$)/,"$1")
!isNaN(t)&&t>0&&t!==if_height&&4>countAdapt&&t!=prevIfrH&&(iframe.height(if_height=t+10),prevIfrH=iframe.height(),iframe.contents().find("div.teaserImageContainer").css("display","none"))}))},actmode=""
setTextSize=function(e){return actmode!=e?($("body").removeClass("smalltext"),$("body").removeClass("largetext"),"small"==e&&$("body").addClass("smalltext"),"large"==e&&$("body").addClass("largetext"),"medium"==e&&(e=""),actmode=e,void $.ajax({type:"GET",url:"/setBodySize.asp?mode="+actmode+"&ssid="+Math.floor(9999*Math.random())}).done(function(e){})):void 0},restoreText=function(){$("img.rtxt").css("display","none"),$("img.bkn").css("display","inline"),$("#TicketcornerShopContainer").css("display","none"),$("#bookingContainer").remove(),$("div.pageContent").css("display","inline")},loadHomeBgBox=function(e){e.hasClass("bgloaded")||(e.css("background-image","url("+e.attr("data-href")+")"),e.addClass("bgloaded"))},changeBoxSlide=function(e,t){setTimeout(function(){actVisible=e.find("div.showing"),gtObjSize=e.find("div.homeBox").size(),nextObjInd=e.find("div.homeBox").eq(actVisible.index()),0==nextObjInd.size()&&(nextObjInd=e.find("div.homeBox").eq(0)),nextObjInd.size()>0&&loadHomeBgBox(nextObjInd),nextObjInd.addClass("showing"),actVisible.removeClass("showing"),actVisible.css("z-index","2"),nextObjInd.css("z-index","1"),nextObjInd.size()>0&&(actVisible.delay(800).fadeOut(1200,function(){changeBoxSlide(e,hometimeslide)}),nextObjInd.css("top","36px"),nextObjInd.fadeIn(800))},t)},inputRewrite=function(){$("input.sTring1").keypress(function(){pos=$(this).caret(),0==pos&&(gtval=$(this).val(),gtval=gtval.substring(1,1),$(this).val(gtval))})},checkNavigator=function(){isiphone=/iphone/.test(clientNavigator),isipad=/ipad/.test(clientNavigator),isandroid=/android/.test(clientNavigator),ischrome=/chrome/.test(clientNavigator),isfirefox=/firefox/.test(clientNavigator),ismsie=/msie/.test(clientNavigator),msphone=/iemobile/.test(clientNavigator),msphone1=/Windows Phone/.test(clientNavigator),(msphone||msphone1)&&(wphone=!0),wSize=$(window).width(),(isiphone||wphone||isipad||isandroid)&&(ismobile=!0),isiphone||wphone||isandroid&&wSize<760?($('meta[name="viewport"]').remove(),$('<meta name="viewport" content="width=device-width, initial-scale=0.54,target-densitydpi=device-dpi, minimum-scale=0.54, maximum-scale=0.54"/>').appendTo("head"),$("body").addClass("noflash"),isphone=!0):$('<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/>').appendTo("head"),isipad&&$("body").addClass("noflash")},mobileSite=function(){},setHype=function(){$("div.boxText p").not(".btit").hyphenate(langHype)},desktopSite=function(){wW=$(window).width(),wH=$(window).height(),$("#coverLoad").css("height",$(document).innerHeight()),setTimeout(function(){$(document).scrollTop(0)},500)},MakeFb=function(){$("#fb-root").size()>0&&(gHref=$('link[rel="canonical"]').attr("href"),$('<div id="fBB" style="position:relative;float:right;margin-right:55px;width:5%;height:40px;padding-top:10px; display:none;"><div style="position:relative;float:left;margin:0px;width:100%; height:40px"><div class="fb-like" data-href="'+gHref+'" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div></div></div>').prependTo(".normalPage"),function(e,t,i){var a,o=e.getElementsByTagName(t)[0]
e.getElementById(i)||(a=e.createElement(t),a.id=i,a.src="//connect.facebook.net/it_IT/all.js#xfbml=1",o.parentNode.insertBefore(a,o))}(document,"script","facebook-jssdk"),setTimeout(function(){$("#fBB").fadeIn()
try{FB.XFBML.parse()}catch(e){}},400))},getShare=function(){$(".divShare").height()<10?($("div.divTogl1").slideUp(100),$("div.divTogl").not(".divShare").animate({height:"0px"},100),$(".divShare").css("display","inline"),$(".divShare").stop().animate({height:"52px"},400)):$(".divShare").stop().animate({height:"0px"},400)},sshare=function(e){return shareUrl=$('meta[property="og:url"]').attr("content"),"email"==e?void(document.location="mailto:?subject=luganolac.ch&body="+shareUrl):("google"==e&&(gUrl="//plus.google.com/share?url="+encodeURIComponent(shareUrl)),"linkedin"==e&&(gUrl="//www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(shareUrl)),"pinterest"==e&&(shareImage=$('meta[property="og:image"]').attr("content"),shareDesc=$('meta[property="og:title"]').attr("content"),gUrl="//www.pinterest.com/pin/create/button/?url="+encodeURIComponent(shareUrl)+"&media="+encodeURIComponent(shareImage)+"&description="+encodeURIComponent(shareDesc)),"twitter"==e&&(gUrl="//www.twitter.com/share?url="+encodeURIComponent(shareUrl)),"facebook"==e&&(gUrl="//www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(shareUrl)),void window.open(gUrl,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600"))},newsletter=function(){$("div.divTogl1").not($(".divNewsletter")).slideUp(100),$("div.divTogl").animate({height:"0px"},100),$(".divNewsletter").width($("#header").width()),$(".divNewsletter").css("left",$("#header").position().left),$(".divNewsletter").stop().slideToggle(400)},getSearch=function(){$("div.divTogl1").not(".divSearch").slideUp(100),$("div.divTogl").animate({height:"0px"},100),$(".divSearch").width($("#header").width()-1),$(".divSearch").css("left",$("#header").position().left),$(".divSearch").stop().slideToggle(400),$(".divSearch input").val($(".divSearch input").attr("title")),$(".divSearch input").trigger("click")},$.fn.selectRange=function(e,t){return this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(e,t)
else if(this.createTextRange){var i=this.createTextRange()
i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select()}})},loadBoxesImages=function(){$("div.boxImage:in-viewport").not(".loaded").each(function(){$(this).find("img").css("background-image","url("+$(this).find("img").attr("data-href")+")"),$(this).find("img").delay(300).fadeIn(),$(this).addClass("loaded")})},checkSlForm=function(e){return"XX"==e?($("#bookingContainer").html('<p><strong>Informazione</strong><br/><br/>Vi informiamo che le future assunzioni nell\'ambito del progetto LAC avverranno tramite concorso pubblico, che verrà puntualmente comunicato sia sul sito della Città di Lugano (<a href="http://www.lugano.ch/concorsi"">www.lugano.ch/concorsi</a>) che sui mezzi di comunicazione regionali.<br/>La documentazione di concorso prevede la specifica dei requisiti richiesti al concorrente.<br/>Vi consigliamo di tenervi informata in tal senso.</p>'),!1):"XXX"==e?($("#bookingContainer").html('<p><strong>Informazione</strong><br/><br/>La prenotazione dei biglietti non è possibile per e-mail. Per l\'acquisto o la prenotazione di biglietti vi preghiamo di <a href="http://www.luganolac.ch/it/374/biglietteria">contattare telefonicamente la biglietteria</a> oppure acquistare i vostri <a href="/it/421/biglietteria-online">biglietti on-line</a></p>'),!1):void 0},loadVimeoPic=function(e,t,i){e=e.substring(2),setTimeout(function(){$.ajax({type:"GET",url:"http://vimeo.com/api/v2/video/"+e+".json",jsonp:"callback",dataType:"jsonp",success:function(t){$("#v_"+e).css("background-image","url("+t[0].thumbnail_large+")"),$.ajax({type:"GET",url:"/saveVimeo.asp?thumb="+t[0].thumbnail_large+"&videoid="+e+"&loadref="+i+"&ssid="+Math.floor(9999*Math.random())}).done(function(e){})},error:function(e,t,i){alert(t+", "+i)}})},500*t)},moretickets=function(e){evUrl="/getmoreEvents.asp?getDate="+e,$.ajax({type:"GET",url:evUrl+"&ssid="+Math.floor(9999*Math.random())}).done(function(e){$("input.loadmore").remove(),$(e).appendTo($("div.evList")),getBuyButtons(),$("div.evList > div").click(function(e){event.stopPropagation(),document.location=$(this).attr("data-title")}),$("div.evList span").click(function(e){event.stopPropagation()})})},makeCForm=function(){$("textarea.txtC").keyup(function(){vLenght=$(this).val().length,$("font.tacounter").html(vLenght)}),$("#getContact").submit(function(e){return e.preventDefault,inpts=$("div.pText #bookingContainer p input").not(".bt").not(".posti"),inpts.removeClass("err"),$("#getContact select").css("border","solid 1px #666"),$("#getContact textarea").css("border","solid 1px #666"),gtval1=$(".cptch").val(),$.ajax({url:"/capthca_check.asp?val="+gtval1+"&ssid="+Math.floor(99999*Math.random()),success:function(e){if("NOOK"==e)$(".cptch").addClass("err")
else{complete=1,gtMail=$("#getContact input[name=email]").val()
var t=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/
t.test(gtMail)||($("#getContact input[name=email]").addClass("err"),complete=0),gtTel=$("#getContact input[name=tel]").val()
var i=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{2,4})(-| )?(\d{2,4})(( x| ext)\d{1,5}){0,1}$/
for(i.test(gtTel)||($("input[name=tel]").addClass("err"),complete=0),x=0;x<inpts.size();x++)inpts.eq(x).val().length<2&&(inpts.eq(x).addClass("err"),complete=0)
""==$("#getContact select").val()&&($("#getContact select").css("border","solid 1px #ff0000"),complete=0),""==$("#getContact textarea").val()&&($("#getContact textarea").css("border","solid 1px #ff0000"),complete=0),1==complete&&(data1=$("#getContact").serialize(),$("#getContact input[type=submit]").css("opacity","0.0"),$.ajax({type:"POST",url:"/sendContact.asp",dataType:"html",data:data1,success:function(e){"OK"==e&&($("#getContact").remove(),$("#bookingContainer").html("<p>Il suo messaggio è stato inviato.<br/><br/>Ci metteremo al più presto in contatto con voi.</p>"),$("html,body").scrollTop(0)),"ERR3"==e&&($("#getContact").remove(),$("#bookingContainer").html("<p>Messaggio di contatto già inviato in precedenza.</p>"))},error:function(e){$("#getContact input[type=submit]").css("opacity","1.0"),$('<p style="color:#ff0000">Si è verificato un errore, si prega di riprovare</p>').appendTo($("#bookingContainer"))}}))}}}),!1}),$("img.vimEmbd").not(".ld").each(function(){gtid=$(this).attr("id"),obRef=$(this).attr("data-href"),gtsrc=loadVimeoPic(gtid,$(this).index(".vimEmbd"),obRef)})},moveVid=function(e){obm=$("div.vidCont"),moveSize=$("div.vidCont > div").eq(0).outerWidth()+24,actLeft=obm.position().left,1==e&&(newleft=actLeft+moveSize),0==e&&(newleft=actLeft-moveSize),newleft>0&&(newleft=0),newleft<-1*(obm.innerWidth()-(obm.parent().width()-moveSize))||obm.stop().animate({left:newleft+"px"},500)},viewEmbd=function(e){txEmb=e.find("textarea").val(),txNm=e.find("img").attr("alt"),$("div.embdVideo").html(txEmb),$("div.embdVideo").fadeIn(500),$("#imgPager").fadeIn(500),$("html,body").scrollTop(0),$("h2.subtitle").remove(),$('<h2 class="subtitle" style="margin-top:10px">'+txNm+"</h2>").appendTo($("div.pText h1.titolo"))}


jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return 1>(b/=e/2)?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return 1>(b/=e/2)?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return 1>(b/=e/2)?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return 1>(b/=e/2)?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:1>(b/=e/2)?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return 1>(b/=e/2)?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),Math.abs(d)>h){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),Math.abs(d)>h){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(2==(b/=e/2))return c+d;if(g||(g=e*.3*1.5),Math.abs(d)>h){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return 1>b?-.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+c:.5*h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),1>(b/=e/2)?d/2*b*b*(((f*=1.525)+1)*b-f)+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){return 1/2.75>(b/=e)?d*7.5625*b*b+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(a,b,c,d,e){return e/2>b?.5*jQuery.easing.easeInBounce(a,2*b,0,d,e)+c:.5*jQuery.easing.easeOutBounce(a,2*b-e,0,d,e)+.5*d+c}});

!function(a,b){function c(b){var c,d=a("<div></div>").css({width:"100%"});return b.append(d),c=b.width()-d.width(),d.remove(),c}function d(e,f){var g=e.getBoundingClientRect(),h=g.top,i=g.bottom,j=g.left,k=g.right,l=a.extend({tolerance:0,viewport:b},f),m=!1,n=l.viewport.jquery?l.viewport:a(l.viewport);n.length||(console.warn("isInViewport: The viewport selector you have provided matches no element on page."),console.warn("isInViewport: Defaulting to viewport as window"),n=a(b));var o=n.height(),p=n.width(),q=n.get(0).toString();if(n[0]!==b&&"[object Window]"!==q&&"[object DOMWindow]"!==q){var r=n.get(0).getBoundingClientRect();h-=r.top,i-=r.top,j-=r.left,k=j+p,d.scrollBarWidth=d.scrollBarWidth||c(n),p-=d.scrollBarWidth}return l.tolerance=~~Math.round(parseFloat(l.tolerance)),l.tolerance<0&&(l.tolerance=o+l.tolerance),Math.abs(j)>=p?m:m=l.tolerance?!!(h<=l.tolerance&&i>=l.tolerance):!!(i>0&&o>=h)}String.prototype.hasOwnProperty("trim")||(String.prototype.trim=function(){return this.replace(/^\s*(.*?)\s*$/,"$1")});var e=function(b){if(1===arguments.length&&"function"==typeof b&&(b=[b]),!(b instanceof Array))throw new SyntaxError("isInViewport: Argument(s) passed to .do/.run should be a function or an array of functions");for(var c=0;c<b.length;c++)if("function"==typeof b[c])for(var d=0;d<this.length;d++)b[c].call(a(this[d]));else console.warn("isInViewport: Argument(s) passed to .do/.run should be a function or an array of functions"),console.warn("isInViewport: Ignoring non-function values in array and moving on");return this};a.fn["do"]=function(a){return console.warn("isInViewport: .do causes issues in IE and some browsers since its a reserved. Use $.fn.run instead i.e., $(el).run(fn)."),e(a)},a.fn.run=e,a.extend(a.expr[":"],{"in-viewport":function(a,b,c){if(c[3]){var e=c[3].split(",");return 1===e.length&&isNaN(e[0])&&(e[1]=e[0],e[0]=void 0),d(a,{tolerance:e[0]?e[0].trim():void 0,viewport:e[1]?e[1].trim():void 0})}return d(a)}})}(jQuery,window);

(function(e){var o="left",n="right",d="up",v="down",c="in",w="out",l="none",r="auto",k="swipe",s="pinch",x="tap",i="doubletap",b="longtap",A="horizontal",t="vertical",h="all",q=10,f="start",j="move",g="end",p="cancel",a="ontouchstart" in window,y="TouchSwipe";var m={fingers:1,threshold:75,cancelThreshold:25,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,triggerOnTouchEnd:true,triggerOnTouchLeave:false,allowPageScroll:"auto",fallbackToMouseEvents:true,excludedElements:"button, input, select, textarea, a, .noSwipe"};e.fn.swipe=function(D){var C=e(this),B=C.data(y);if(B&&typeof D==="string"){if(B[D]){return B[D].apply(this,Array.prototype.slice.call(arguments,1))}else{e.error("Method "+D+" does not exist on jQuery.swipe")}}else{if(!B&&(typeof D==="object"||!D)){return u.apply(this,arguments)}}return C};e.fn.swipe.defaults=m;e.fn.swipe.phases={PHASE_START:f,PHASE_MOVE:j,PHASE_END:g,PHASE_CANCEL:p};e.fn.swipe.directions={LEFT:o,RIGHT:n,UP:d,DOWN:v,IN:c,OUT:w};e.fn.swipe.pageScroll={NONE:l,HORIZONTAL:A,VERTICAL:t,AUTO:r};e.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:h};function u(B){if(B&&(B.allowPageScroll===undefined&&(B.swipe!==undefined||B.swipeStatus!==undefined))){B.allowPageScroll=l}if(B.click!==undefined&&B.tap===undefined){B.tap=B.click}if(!B){B={}}B=e.extend({},e.fn.swipe.defaults,B);return this.each(function(){var D=e(this);var C=D.data(y);if(!C){C=new z(this,B);D.data(y,C)}})}function z(a0,aq){var av=(a||!aq.fallbackToMouseEvents),G=av?"touchstart":"mousedown",au=av?"touchmove":"mousemove",R=av?"touchend":"mouseup",P=av?null:"mouseleave",az="touchcancel";var ac=0,aL=null,Y=0,aX=0,aV=0,D=1,am=0,aF=0,J=null;var aN=e(a0);var W="start";var T=0;var aM=null;var Q=0,aY=0,a1=0,aa=0,K=0;var aS=null;try{aN.bind(G,aJ);aN.bind(az,a5)}catch(ag){e.error("events not supported "+G+","+az+" on jQuery.swipe")}this.enable=function(){aN.bind(G,aJ);aN.bind(az,a5);return aN};this.disable=function(){aG();return aN};this.destroy=function(){aG();aN.data(y,null);return aN};this.option=function(a7,a6){if(aq[a7]!==undefined){if(a6===undefined){return aq[a7]}else{aq[a7]=a6}}else{e.error("Option "+a7+" does not exist on jQuery.swipe.options")}};function aJ(a8){if(ax()){return}if(e(a8.target).closest(aq.excludedElements,aN).length>0){return}var a9=a8.originalEvent?a8.originalEvent:a8;var a7,a6=a?a9.touches[0]:a9;W=f;if(a){T=a9.touches.length}else{a8.preventDefault()}ac=0;aL=null;aF=null;Y=0;aX=0;aV=0;D=1;am=0;aM=af();J=X();O();if(!a||(T===aq.fingers||aq.fingers===h)||aT()){ae(0,a6);Q=ao();if(T==2){ae(1,a9.touches[1]);aX=aV=ap(aM[0].start,aM[1].start)}if(aq.swipeStatus||aq.pinchStatus){a7=L(a9,W)}}else{a7=false}if(a7===false){W=p;L(a9,W);return a7}else{ak(true)}}function aZ(a9){var bc=a9.originalEvent?a9.originalEvent:a9;if(W===g||W===p||ai()){return}var a8,a7=a?bc.touches[0]:bc;var ba=aD(a7);aY=ao();if(a){T=bc.touches.length}W=j;if(T==2){if(aX==0){ae(1,bc.touches[1]);aX=aV=ap(aM[0].start,aM[1].start)}else{aD(bc.touches[1]);aV=ap(aM[0].end,aM[1].end);aF=an(aM[0].end,aM[1].end)}D=a3(aX,aV);am=Math.abs(aX-aV)}if((T===aq.fingers||aq.fingers===h)||!a||aT()){aL=aH(ba.start,ba.end);ah(a9,aL);ac=aO(ba.start,ba.end);Y=aI();aE(aL,ac);if(aq.swipeStatus||aq.pinchStatus){a8=L(bc,W)}if(!aq.triggerOnTouchEnd||aq.triggerOnTouchLeave){var a6=true;if(aq.triggerOnTouchLeave){var bb=aU(this);a6=B(ba.end,bb)}if(!aq.triggerOnTouchEnd&&a6){W=ay(j)}else{if(aq.triggerOnTouchLeave&&!a6){W=ay(g)}}if(W==p||W==g){L(bc,W)}}}else{W=p;L(bc,W)}if(a8===false){W=p;L(bc,W)}}function I(a6){var a7=a6.originalEvent;if(a){if(a7.touches.length>0){C();return true}}if(ai()){T=aa}a6.preventDefault();aY=ao();Y=aI();if(aq.triggerOnTouchEnd||(aq.triggerOnTouchEnd==false&&W===j)){W=g;L(a7,W)}else{if(!aq.triggerOnTouchEnd&&a2()){W=g;aB(a7,W,x)}else{if(W===j){W=p;L(a7,W)}}}ak(false)}function a5(){T=0;aY=0;Q=0;aX=0;aV=0;D=1;O();ak(false)}function H(a6){var a7=a6.originalEvent;if(aq.triggerOnTouchLeave){W=ay(g);L(a7,W)}}function aG(){aN.unbind(G,aJ);aN.unbind(az,a5);aN.unbind(au,aZ);aN.unbind(R,I);if(P){aN.unbind(P,H)}ak(false)}function ay(a9){var a8=a9;var a7=aw();var a6=aj();if(!a7){a8=p}else{if(a6&&a9==j&&(!aq.triggerOnTouchEnd||aq.triggerOnTouchLeave)){a8=g}else{if(!a6&&a9==g&&aq.triggerOnTouchLeave){a8=p}}}return a8}function L(a8,a6){var a7=undefined;if(F()){a7=aB(a8,a6,k)}else{if(M()&&a7!==false){a7=aB(a8,a6,s)}}if(aC()&&a7!==false){a7=aB(a8,a6,i)}else{if(al()&&a7!==false){a7=aB(a8,a6,b)}else{if(ad()&&a7!==false){a7=aB(a8,a6,x)}}}if(a6===p){a5(a8)}if(a6===g){if(a){if(a8.touches.length==0){a5(a8)}}else{a5(a8)}}return a7}function aB(a9,a6,a8){var a7=undefined;if(a8==k){aN.trigger("swipeStatus",[a6,aL||null,ac||0,Y||0,T]);if(aq.swipeStatus){a7=aq.swipeStatus.call(aN,a9,a6,aL||null,ac||0,Y||0,T);if(a7===false){return false}}if(a6==g&&aR()){aN.trigger("swipe",[aL,ac,Y,T]);if(aq.swipe){a7=aq.swipe.call(aN,a9,aL,ac,Y,T);if(a7===false){return false}}switch(aL){case o:aN.trigger("swipeLeft",[aL,ac,Y,T]);if(aq.swipeLeft){a7=aq.swipeLeft.call(aN,a9,aL,ac,Y,T)}break;case n:aN.trigger("swipeRight",[aL,ac,Y,T]);if(aq.swipeRight){a7=aq.swipeRight.call(aN,a9,aL,ac,Y,T)}break;case d:aN.trigger("swipeUp",[aL,ac,Y,T]);if(aq.swipeUp){a7=aq.swipeUp.call(aN,a9,aL,ac,Y,T)}break;case v:aN.trigger("swipeDown",[aL,ac,Y,T]);if(aq.swipeDown){a7=aq.swipeDown.call(aN,a9,aL,ac,Y,T)}break}}}if(a8==s){aN.trigger("pinchStatus",[a6,aF||null,am||0,Y||0,T,D]);if(aq.pinchStatus){a7=aq.pinchStatus.call(aN,a9,a6,aF||null,am||0,Y||0,T,D);if(a7===false){return false}}if(a6==g&&a4()){switch(aF){case c:aN.trigger("pinchIn",[aF||null,am||0,Y||0,T,D]);if(aq.pinchIn){a7=aq.pinchIn.call(aN,a9,aF||null,am||0,Y||0,T,D)}break;case w:aN.trigger("pinchOut",[aF||null,am||0,Y||0,T,D]);if(aq.pinchOut){a7=aq.pinchOut.call(aN,a9,aF||null,am||0,Y||0,T,D)}break}}}if(a8==x){if(a6===p||a6===g){clearTimeout(aS);if(V()&&!E()){K=ao();aS=setTimeout(e.proxy(function(){K=null;aN.trigger("tap",[a9.target]);if(aq.tap){a7=aq.tap.call(aN,a9,a9.target)}},this),aq.doubleTapThreshold)}else{K=null;aN.trigger("tap",[a9.target]);if(aq.tap){a7=aq.tap.call(aN,a9,a9.target)}}}}else{if(a8==i){if(a6===p||a6===g){clearTimeout(aS);K=null;aN.trigger("doubletap",[a9.target]);if(aq.doubleTap){a7=aq.doubleTap.call(aN,a9,a9.target)}}}else{if(a8==b){if(a6===p||a6===g){clearTimeout(aS);K=null;aN.trigger("longtap",[a9.target]);if(aq.longTap){a7=aq.longTap.call(aN,a9,a9.target)}}}}}return a7}function aj(){var a6=true;if(aq.threshold!==null){a6=ac>=aq.threshold}if(a6&&aq.cancelThreshold!==null){a6=(aP(aL)-ac)<aq.cancelThreshold}return a6}function ab(){if(aq.pinchThreshold!==null){return am>=aq.pinchThreshold}return true}function aw(){var a6;if(aq.maxTimeThreshold){if(Y>=aq.maxTimeThreshold){a6=false}else{a6=true}}else{a6=true}return a6}function ah(a6,a7){if(aq.allowPageScroll===l||aT()){a6.preventDefault()}else{var a8=aq.allowPageScroll===r;switch(a7){case o:if((aq.swipeLeft&&a8)||(!a8&&aq.allowPageScroll!=A)){a6.preventDefault()}break;case n:if((aq.swipeRight&&a8)||(!a8&&aq.allowPageScroll!=A)){a6.preventDefault()}break;case d:if((aq.swipeUp&&a8)||(!a8&&aq.allowPageScroll!=t)){a6.preventDefault()}break;case v:if((aq.swipeDown&&a8)||(!a8&&aq.allowPageScroll!=t)){a6.preventDefault()}break}}}function a4(){var a7=aK();var a6=U();var a8=ab();return a7&&a6&&a8}function aT(){return !!(aq.pinchStatus||aq.pinchIn||aq.pinchOut)}function M(){return !!(a4()&&aT())}function aR(){var a8=aw();var ba=aj();var a7=aK();var a6=U();var a9=a6&&a7&&ba&&a8;return a9}function S(){return !!(aq.swipe||aq.swipeStatus||aq.swipeLeft||aq.swipeRight||aq.swipeUp||aq.swipeDown)}function F(){return !!(aR()&&S())}function aK(){return((T===aq.fingers||aq.fingers===h)||!a)}function U(){return aM[0].end.x!==0}function a2(){return !!(aq.tap)}function V(){return !!(aq.doubleTap)}function aQ(){return !!(aq.longTap)}function N(){if(K==null){return false}var a6=ao();return(V()&&((a6-K)<=aq.doubleTapThreshold))}function E(){return N()}function at(){return((T===1||!a)&&(isNaN(ac)||ac===0))}function aW(){return((Y>aq.longTapThreshold)&&(ac<q))}function ad(){return !!(at()&&a2())}function aC(){return !!(N()&&V())}function al(){return !!(aW()&&aQ())}function C(){a1=ao();aa=event.touches.length+1}function O(){a1=0;aa=0}function ai(){var a6=false;if(a1){var a7=ao()-a1;if(a7<=aq.fingerReleaseThreshold){a6=true}}return a6}function ax(){return !!(aN.data(y+"_intouch")===true)}function ak(a6){if(a6===true){aN.bind(au,aZ);aN.bind(R,I);if(P){aN.bind(P,H)}}else{aN.unbind(au,aZ,false);aN.unbind(R,I,false);if(P){aN.unbind(P,H,false)}}aN.data(y+"_intouch",a6===true)}function ae(a7,a6){var a8=a6.identifier!==undefined?a6.identifier:0;aM[a7].identifier=a8;aM[a7].start.x=aM[a7].end.x=a6.pageX||a6.clientX;aM[a7].start.y=aM[a7].end.y=a6.pageY||a6.clientY;return aM[a7]}function aD(a6){var a8=a6.identifier!==undefined?a6.identifier:0;var a7=Z(a8);a7.end.x=a6.pageX||a6.clientX;a7.end.y=a6.pageY||a6.clientY;return a7}function Z(a7){for(var a6=0;a6<aM.length;a6++){if(aM[a6].identifier==a7){return aM[a6]}}}function af(){var a6=[];for(var a7=0;a7<=5;a7++){a6.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0})}return a6}function aE(a6,a7){a7=Math.max(a7,aP(a6));J[a6].distance=a7}function aP(a6){return J[a6].distance}function X(){var a6={};a6[o]=ar(o);a6[n]=ar(n);a6[d]=ar(d);a6[v]=ar(v);return a6}function ar(a6){return{direction:a6,distance:0}}function aI(){return aY-Q}function ap(a9,a8){var a7=Math.abs(a9.x-a8.x);var a6=Math.abs(a9.y-a8.y);return Math.round(Math.sqrt(a7*a7+a6*a6))}function a3(a6,a7){var a8=(a7/a6)*1;return a8.toFixed(2)}function an(){if(D<1){return w}else{return c}}function aO(a7,a6){return Math.round(Math.sqrt(Math.pow(a6.x-a7.x,2)+Math.pow(a6.y-a7.y,2)))}function aA(a9,a7){var a6=a9.x-a7.x;var bb=a7.y-a9.y;var a8=Math.atan2(bb,a6);var ba=Math.round(a8*180/Math.PI);if(ba<0){ba=360-Math.abs(ba)}return ba}function aH(a7,a6){var a8=aA(a7,a6);if((a8<=45)&&(a8>=0)){return o}else{if((a8<=360)&&(a8>=315)){return o}else{if((a8>=135)&&(a8<=225)){return n}else{if((a8>45)&&(a8<135)){return v}else{return d}}}}}function ao(){var a6=new Date();return a6.getTime()}function aU(a6){a6=e(a6);var a8=a6.offset();var a7={left:a8.left,right:a8.left+a6.outerWidth(),top:a8.top,bottom:a8.top+a6.outerHeight()};return a7}function B(a6,a7){return(a6.x>a7.left&&a6.x<a7.right&&a6.y>a7.top&&a6.y<a7.bottom)}}})(jQuery);

(function(d){d.fn.shuffle=function(c){c=[];return this.each(function(){c.push(d(this).clone(true))}).each(function(a,b){d(b).replaceWith(c[a=Math.floor(Math.random()*c.length)]);c.splice(a,1)})};d.shuffle=function(a){return d(a).shuffle()}})(jQuery);
/*
 * jQuery postMessage - v0.5 - 9/11/2009
 * http://benalman.com/projects/jquery-postmessage-plugin/
 * 
 * Copyright (c) 2009 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($){var g,d,j=1,a,b=this,f=!1,h="postMessage",e="addEventListener",c,i=b[h]&&!$.browser.opera;$[h]=function(k,l,m){if(!l){return}k=typeof k==="string"?k:$.param(k);m=m||parent;if(i){m[h](k,l.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))}else{if(l){m.location=l.replace(/#.*$/,"")+"#"+(+new Date)+(j++)+"&"+k}}};$.receiveMessage=c=function(l,m,k){if(i){if(l){a&&c();a=function(n){if((typeof m==="string"&&n.origin!==m)||($.isFunction(m)&&m(n.origin)===f)){return f}l(n)}}if(b[e]){b[l?e:"removeEventListener"]("message",a,f)}else{b[l?"attachEvent":"detachEvent"]("onmessage",a)}}else{g&&clearInterval(g);g=null;if(l){k=typeof m==="number"?m:typeof k==="number"?k:100;g=setInterval(function(){var o=document.location.hash,n=/^#?\d+&/;if(o!==d&&n.test(o)){d=o;l({data:o.replace(n,"")})}},k)}}}})(jQuery);

(function($) {
  $.fn.caret = function(pos) {
    var target = this[0];
	var isContentEditable = target.contentEditable === 'true';
    
    if (arguments.length == 0) {
      if (window.getSelection) {
        if (isContentEditable) {
          target.focus();
          var range1 = window.getSelection().getRangeAt(0),
              range2 = range1.cloneRange();
          range2.selectNodeContents(target);
          range2.setEnd(range1.endContainer, range1.endOffset);
          return range2.toString().length;
        }
        return target.selectionStart;
      }
      if (document.selection) {
        target.focus();
        if (isContentEditable) {
            var range1 = document.selection.createRange(),
                range2 = document.body.createTextRange();
            range2.moveToElementText(target);
            range2.setEndPoint('EndToEnd', range1);
            return range2.text.length;
        }
        var pos = 0,
        range = target.createTextRange(),
        range2 = document.selection.createRange().duplicate(),
        bookmark = range2.getBookmark();
        range.moveToBookmark(bookmark);
        while (range.moveStart('character', -1) !== 0) pos++;
        return pos;
      }
      return 0;
    }
    if (pos == -1)
      pos = this[isContentEditable? 'text' : 'val']().length;
    if (window.getSelection) {
      if (isContentEditable) {
        target.focus();
        window.getSelection().collapse(target.firstChild, pos);
      }
      else
        target.setSelectionRange(pos, pos);
    }
    else if (document.body.createTextRange) {
      var range = document.body.createTextRange();
      range.moveToElementText(target);
      range.moveStart('character', pos);
      range.collapse(true);
      range.select();
    }
    if (!isContentEditable)
      target.focus();
    return pos;
  }
})(jQuery)